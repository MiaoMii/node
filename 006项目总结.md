### 006项目总结



#### 1.遇见问题及解决方法

​		1.1 应用参数设置去会加上 isShow: false 属性，导致参数设置区不显示（已解决）

​		解决方法：修改发布时对 jz 组件的处理逻辑



​		1.2 charts 嵌套在 DI 弹窗式组件框，该charts属性有个 isShow：false 导致弹窗不展示（已解决）

​		解决方法：同1.1相同



​		1.3 页面存在文本组件时，拖拽其它组件会导致文本组件宽度增加（已解决）

​		解决方法：css 样式 box-sizing 导致的



​		1.4 uib 发布后数据很大（10M）导致浏览器卡以及平台卡（已解决）

​		解决方法： 由于回显后嵌套 data-data 数据，再回显时先将这个属性删除了



​		1.5 百分比布局回显精度丢失（已解决）

​		解决方法： 引入 bignumber.js



​		1.6 现有的iframe多标签模式页面超过6个后就会卡顿，Google浏览器同域名请求最大并发数为6个

​		解决方法：临时修改为页面最多保留4个iframe，后续可能还是需要用DI提供的页面跳转按钮，共用部分可以存储为用户自定义的一个组件，达到复用效果

​		

​		1.7 onerror中的图片找不到导致app页面控制台一直报图片404（已解决）

​		解决方法：将onerror中的图片替换为base64格式

### 2. 建议与改进

​		2.1 存储模板

​			场景：存在多个相同页面布局时，由于DI的参数不一致导致页面布局不能够复用

​			建议： 可以增加一个用户自定义存储模板的功能。也可以内置常用布局模板进行快速搭建



​		2.2 撤销功能

​			场景：在修改布局时不小心删错了一个比较复杂的组件，就只能由DI重新进入 uib 进行恢复，此时你之前修改的东西就白做了

​			建议：增加撤销功能



​		2.3 页面存在多个图表时，不容易找到自己需要的图表

​			场景：当一个页面展示的图表过多且类型相同时，在 uib左侧菜单栏 显示的都是 preContainer1-xxx，需要将图表拖入画布查看它的view才能确定是否为自己需要的图表

​			建议：在左侧组件区展示它的view值



​		2.4 视图筛选变化了之后需要替换 uib 对应的 chart 的视图筛选 id，或者重新拖入chart至画布；

​			  建议：可以通过遍历画布上存在的DI组件与新传入的DI组件paramList是否存在差异，可以通过view值来判断两者是否为同一个，如果不同则直接用新的paramList替换画布中的组件paramList



​		2.5 其它建议 

​			我认为的开发顺序应该是，先根据合同功能完成分析流的开发，确定分析流中对应的功能点的完整性，出前端页面原型图，确定交互，前端人员根据原型图及交互功能进行开发，这样可以尽可能的减少返工次数，提升效率。

### 3 痛点

​		3.1 有较多的交互需求，可以用自定义脚本实现，但较为复杂的需要跟DI配合一起开发(界面一点击联动按钮跳转到界面三，需要图元筛选数据元之后把数据发出来，再依据数据中的异常类型跳转到对应的界面)，相当于定制化需求。脚本又需要前端人员来开发，非前端专业的人员可能短时间内无法完成对应需求的交互功能。



​		3.2 DI app发布部分问题较多，例如现场同时打开两个分析流发布，就会导致后打开的分析流无法发布；选用已发布的app配置，此时页面名称为选用的配置的app名称，再uib点击发布后回DI平台，此时页面名称会自动变成分析流名称，这些都需要刷新页面后才能正常发布。（公司6094环境已解决）



​		3.3 现场的DI版本跟公司开发环境版本不一致，这就会有很多因为环境不一致导致的未知问题，现场的沟通成本又比较高，变相增加了时间成本。

